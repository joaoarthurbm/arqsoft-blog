<!doctype html>

<html lang="en">

<head>
  <title>Documentação arquitetural para o projeto Farol Covid - Arquitetura de Software</title>
  <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="description" content="Documentação arquitetural produzida pelas turmas de Arquitetura de Software - Computação @ UFCG." />
<meta name="author" content="Example" /><meta property="og:title" content="Documentação arquitetural para o projeto Farol Covid" />
<meta property="og:description" content="Autor Este documento foi produzido por Natan Macena Ribeiro.
 Matrícula: 114111371 Contato: natan.ribeiro@ccc.ufcg.edu.br Projeto documentado: https://github.com/ImpulsoGov/farolcovid  Descrição Arquitetural &ndash; FarolCovid A fonte utilizada para produção deste documento foi o projeto Farol Covid." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://joaoarthurbm.github.io/arqsoft-blog/posts/farolcovid/" />
<meta property="article:published_time" content="2020-10-12T00:00:00-03:00" />
<meta property="article:modified_time" content="2020-10-12T00:00:00-03:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Documentação arquitetural para o projeto Farol Covid"/>
<meta name="twitter:description" content="Autor Este documento foi produzido por Natan Macena Ribeiro.
 Matrícula: 114111371 Contato: natan.ribeiro@ccc.ufcg.edu.br Projeto documentado: https://github.com/ImpulsoGov/farolcovid  Descrição Arquitetural &ndash; FarolCovid A fonte utilizada para produção deste documento foi o projeto Farol Covid."/>

<meta name="generator" content="Hugo 0.75.1" />
    

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css" integrity="sha256-l85OmPOjvil/SOvVt3HnSSjzF1TUMyT9eV0c2BzEGzU=" crossorigin="anonymous" />
  <link rel="stylesheet" href="https://joaoarthurbm.github.io/arqsoft-blog/fontawesome/css/all.min.css" />
  
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Slab|Ruda" />
  
  
  <link rel="stylesheet" type="text/css" href="https://joaoarthurbm.github.io/arqsoft-blog/css/styles.css" /></head>

<body>
  <div id="container">
    <header>
      <h1>
                <a href="https://joaoarthurbm.github.io/arqsoft-blog/">Arquitetura de Software</a>
            </h1>

      <ul id="social-media">
             <li>
               <a href="https://github.com/joaoarthurbm/arqsoft-blog" title="GitHub">
               <i class="fab fa-github fa-lg"></i>
               </a>
             </li>
      </ul>
      
      <p><em>Computação @ UFCG</em></p>
      
    </header>

    
<nav>
    <ul>
        
    </ul>
</nav>


    <main>




<article>

    <h1>Documentação arquitetural para o projeto Farol Covid</h1>

    
      <aside>
    <ul>
        <li>
            <time class="post-date" datetime="2020-10-12T00:00:00-03:00">Oct 12, 2020</time>
        </li>
        

        

        <li>6 minutes read</li>
    </ul>
</aside>

    

    


    <hr>
<h1 id="autor">Autor</h1>
<p>Este documento foi produzido por Natan Macena Ribeiro.</p>
<ul>
<li>Matrícula: 114111371</li>
<li>Contato: <a href="mailto:natan.ribeiro@ccc.ufcg.edu.br">natan.ribeiro@ccc.ufcg.edu.br</a></li>
<li>Projeto documentado: <a href="https://github.com/ImpulsoGov/farolcovid">https://github.com/ImpulsoGov/farolcovid</a></li>
</ul>
<h1 id="descrição-arquitetural----farolcovid">Descrição Arquitetural &ndash; FarolCovid</h1>
<p>A fonte utilizada para produção deste documento foi o projeto <a href="https://github.com/ImpulsoGov/farolcovid">Farol Covid</a>. A partir desse projeto (<a href="https://github.com/ImpulsoGov/farolcovid">Farol Covid</a>), este documento propõe uma descrição arquitetural baseada essencialmente no modelo <a href="https://c4model.com/">C4</a>, pelo qual permite que diferentes stakeholders possam compreender o funcionamento da ferramenta a partir de algumas visões arquiteturais.</p>
<h2 id="descrição-geral-sobre-o-farol-covid">Descrição Geral sobre o Farol Covid</h2>
<p>O Farol Covid é uma ferramenta de monitoramento do risco de colapso no sistema de saúde em municípios brasileiros com a COVID-19. Além de apresentar a situação atual da COVID-19 nos estados ou municípios, esse projeto permite que governantes consigam definir políticas de contingenciamento da doença, baseando-se em indicadores bem definidos que inclusive, permitem a realização de simulações que projetam possíveis cenários para a região de interesse. Para mais detalhes sobre o projeto abordado, acesse <a href="https://farolcovid.coronacidades.org/">este link</a>.</p>
<h3 id="objetivo-geral">Objetivo Geral</h3>
<p>O objetivo do projeto é disponibilizar um serviço para coleta e visualização de dados relacionados a COVID-19, apresentando análises e indicadores da situação da doença para uma determinada região.</p>
<h3 id="objetivos-específicos">Objetivos Específicos</h3>
<p>A idéia é viabilizar que gestores públicos (estaduais e municipais), possuam uma ferramenta que mostra a situação atual da COVID-19 e indica possíveis cenários baseados no comportamento da doença na região de seu mandato.</p>
<h3 id="contexto">Contexto</h3>
<p>A partir da introdução, podemos expecificar o sistema do FarolCovid, como um serviço Web que apresenta informações contidas nos sistemas de base de dados brasileiros <a href="https://brasil.io/home/">Brasil.IO</a> e <a href="https://datasus.saude.gov.br/">DataSUS</a>, considerando os interesses especificos do usuário. De maneira geral, o sistema funciona como um facilitador, entre o usuário e as bases de dados anteriormente citadas, em que simplifica a obtenção de determinada informação por meio de refinamento e operações de analises sobre tais bases de dados.</p>
<p>Assim, podemos representar a aplicação como uma entidade intermediária (&ldquo;FarolCovid&rdquo;) entre as entidades &ldquo;Usuário&rdquo; e &ldquo;Brasil.IO&rdquo; juntamente com &ldquo;DataSUS&rdquo;, como é ilustrado no diagrama de contexto abaixo:</p>
<p><img src="01_diagrama_de_contexto.png" alt="fig1"></p>
<h3 id="containers">Containers</h3>
<p>Como containers do FarolCovid, podemos elencar 3 entidades: Web Page, View e API.</p>
<p>O primeiro deles, <strong>Web Page</strong>, é responsável por pela representação gráfica do sistema, ou seja, todo o HTML que o browser irá interpretar e renderizar para o usuário final.</p>
<p>O elemento <strong>View</strong>, trata-se de toda lógica do negócio, realizando todas as operações com os dados (refinamento, filtragem e análise) coletados das bases de dados (<a href="https://brasil.io/home/">Brasil.IO</a> e <a href="https://datasus.saude.gov.br/">DataSUS</a>) atravéz de uma <a href="http://datasource.coronacidades.org/br/">API</a> desenvolvida para isso. Esse contêiner utilizar Python como linguagem e é acompanhado pelos frameworks Flask e Streamlit. O sistema é executado numa nuvem Heroku, utilizando uma máquina virtual com o sistema operacional Ubuntu 18.04 LTS.</p>
<p>O container <strong>API</strong>, é um conjunto de rotinas e padrões de programação para acesso das bases de dados do FarolCovid. Foi construido para o sistema que estamos apresentando e o projeto (que pode ser acessado <a href="https://github.com/ImpulsoGov/coronacidades-datasource">neste link</a>) possui o nome de <em>Coronacidades API</em>. Assim como o FarolCovid, o <a href="https://github.com/ImpulsoGov/coronacidades-datasource">Coronacidades API</a> é servido por uma maquina virtual Heroku e foi desenvolvido em Python juntamente com o framework Django, a partir do padrão de projeto MTV (Model, Template, View).</p>
<p>Veja principais endpoints utilizados pelo FarolCovid:</p>
<ul>
<li>br/cities/cases/full: Fornece histórico completo de dados do <a href="https://brasil.io/home/">Brasil.IO</a> com a taxa e estimativa dos casos ativos</li>
<li>br/cities/simulacovid/main: Dados filtrados para servir a aplicação SimulaCovid do FarolCovid</li>
<li>br/cities/farolcovid/main: Dados filtrados e indicadores de cidades</li>
<li>br/states/farolcovid/main: Dados filtrados e indicadores de estados</li>
</ul>
<p>*Para os demais endpoints acesse <a href="http://datasource.coronacidades.org/br/">API.</a></p>
<p>Abaixo encontra-se o diagrama de container para o que foi discutido anteriormente:</p>
<p><img src="02_diagrama_de_containers.png" alt="fig2"></p>
<h3 id="componentes">Componentes</h3>
<p>A fim de detalhamento, podemos dividir o container View em cinco componentes: Resources, Model, Helper Server, Utils e Pages.</p>
<p>O componente Resources é composto por um conglomerado de scripts em Python que são utilizados em páginas HTML, compondo de forma fragmentada, funcionalidades para interação do usuário no sistema.</p>
<p>Model provê o conceito matemático utilizado para a realização de simulações e projeções epidemiológicas, através da linguagem em Python.</p>
<p>Helper Server utiliza o microframework Flask juntamente com Python, para fornecer um serviço de cache do sistema, carregando dados via API calls.</p>
<p>O elemento Utils, é responsável pela realização de diferentes funções relacionadas ao gerenciamento da seção do usuário no sistema coletando, informações da seção dos usuário e interações através do Streamlit framework, integrado com Python.</p>
<p>Por último temos o componente Pages que usa Python, HTML e o framework Streamlit, para fornecer visualização interativa com dados. É nesse componente, encontra-se todas as subaplicações disponibilizadas pelo FarolCovid (descritas na seção <strong>Visão de Informação</strong> deste documento) e se comunica com a API para buscas, filtragens e realização de análises dos dados.</p>
<p>Logo abaixo, temos o diagrama de componentes para o FarolCovid:</p>
<p><img src="03_diagrama_de_componentes.png" alt="fig3"></p>
<h3 id="código">Código</h3>
<pre>
Nesta etapa não faremos diagramas que apresentam detalhes da
implementação. Faremos isso mais adiante.
</pre>
<h3 id="visão-de-informação">Visão de Informação</h3>
<p>Como sabemos, a principal funcionalidade do projeto Farol Covid é apresentar informações pré-processadas, no formato de análises, de acordo com uma determinada localidade. Dessa forma, nesta seção abordaremos de maneira simplificada, o percurso habitual que os usuários percorrem na busca das informações disponibilizadas pela aplicação em estudo.</p>
<p>Na página inicial, o usuário se depara com uma breve apresentação da plataforma e, logo em seguida, uma caixa de seleção é disponibilizada dividida em três tipos: Estado, Região de Saúde (algo particular de cada estado) e Município (Municípios do estado selecionado). Podemos perceber que há uma hierarquia entre os tipos disponíveis, onde um &ldquo;Município&rdquo; é um subtipo de uma &ldquo;Região de Saúde&rdquo; e de um &ldquo;Estado&rdquo;, assim como &ldquo;Região de Saúde&rdquo; é subtipo de um &ldquo;Estado&rdquo;.</p>
<p>Logo abaixo, temos as informações apresentadas de acordo com o que foi selecionado pelo usuário. Essas informações são mostradas a partir de métricas bem definidas (que  estão disponíveis para consulta no botão &ldquo;Entenda a Classificação dos Níveis&rdquo;) e indicam, por exemplo, situação e controle da doença, capacidade do sistema de saúde, etc.</p>
<p>Além disso, é disponibilizado quatro subaplicações que permitem uma análise mais detalhada de acordo com a localidade anteriormente escolhida, sendo elas: Simula Covid, que permite a realização de uma simulação da situação da Covid considerando variáveis pertinentes; Distanciamento Social, que mostra a taxa de isolamento social; Saúde em Ordem, que dá uma prognóstico no que diz respeito a possíveis atividades econômicas seguras para reabertura; Onda Covid, que mostra a evolução da curva de contágio da Covid-19 em relação a outros países.</p>
<p>Para cada interação do usuário, a página é automaticamente recarregada de acordo com o que foi selecionado. Por default, o elemento pré-selecionado do sistema é o estado do Acre.</p>
<p>Vejamos abaixo, uma máquina de estados que ilustra fluxo da informação da aplicação estudada, para principais interações de um usuário:</p>
<p><img src="04_fluxo_informacao.png" alt="fig4"></p>


</article>


<section class="post-nav">
    <ul>
        
        <li>
            <a href="https://joaoarthurbm.github.io/arqsoft-blog/posts/querido-diario/"><i class="fa fa-chevron-circle-left"></i> Documento arquitetural do Querido Diário</a>
        </li>
        
        
        <li>
            <a href="https://joaoarthurbm.github.io/arqsoft-blog/posts/ofwatchdog/">OpenFaaS Of-Watchdog <i class="fa fa-chevron-circle-right"></i> </a>
        </li>
        
    </ul>
</section>
  
    
    
  





</main>
    <footer>
        <h6>Copyright © Turma de Arquitetura de Software UFCG |
            Rendered by <a href="https://gohugo.io" title="Hugo">Hugo</a> |
            <a href="https://joaoarthurbm.github.io/arqsoft-blogindex.xml">Subscribe </a></h6>
    </footer>
</div>
<script src="https://joaoarthurbm.github.io/arqsoft-blog/js/scripts.js"></script>

</body>

</html>

